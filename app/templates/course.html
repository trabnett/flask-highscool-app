{% extends "layout.html" %}
{% block content %}
{% if alert %}
<div class="buffer container">{{ alert }}</div>
{% else %}
<div class="buffer container">
    {% if current_user.started_at_school and current_user.id == course[0][3].id %}
    <div class="alert alert-success" role="alert">
            You are the teacher of this course. Would you like to:
            <ul>
                <li><button class="course-button btn btn-primary btn-xs" onclick="location.href = '/courses/{{ course[0][0].id }}/new_test';">Add New Test</button></li>
                <li>
                    <form action="/courses/{{ course[0][0].id }}/add_students" method="get">
                        <button class="course-button btn btn-primary btn-xs" type="submit">Add Students</button></li>
                    </form>
                </li>
                <li>
                    <form action="/courses/{{ course[0][0].id }}/remove_students" method="get">
                        <button class="course-button btn btn-primary btn-xs" type="submit">Remove Students</button></li>
                    </form>
                <li><button class="course-button btn btn-primary btn-xs" onclick="location.href = '/courses/{{ course[0][0].id }}/delete';">Remove Course</button></li>
            </ul>
    </div>
    {% endif %}
    <h1>{{ course[0][0].course_name }}</h1>
    <h3>Teacher: Professor <a href="/teachers/{{ course[0][3].id }}">{{ course[0][3].last_name }}</a></h3>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <td>Student</td>
                <td>GPA</td>
            </tr>
        </thead>
        <tbody>
            {% for student in course %}
            <tr>
                <td><a href="/students/{{ student[2].id }}">{{ student[2].first_name }} {{ student[2].first_name }}</a></td>
                <td>{{ get_average(student[2].id, course[0][0].course_name) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock%}